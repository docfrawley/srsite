{"ast":null,"code":"import { ref, watchEffect } from 'vue'; // firebase imports\n\nimport { db } from '../firebase/config';\nimport { collection, onSnapshot } from 'firebase/firestore';\n\nconst getCollection = c => {\n  const documents = ref(null); // collection reference\n\n  let colRef = collection(db, c);\n  const unsub = onSnapshot(colRef, snapshot => {\n    let results = [];\n    snapshot.docs.forEach(doc => {\n      results.push({ ...doc.data(),\n        id: doc.id\n      });\n    }); // update values\n\n    documents.value = results;\n  });\n  watchEffect(onInvalidate => {\n    onInvalidate(() => unsub());\n  });\n  return {\n    documents\n  };\n};\n\nexport default getCollection;","map":{"version":3,"names":["ref","watchEffect","db","collection","onSnapshot","getCollection","c","documents","colRef","unsub","snapshot","results","docs","forEach","doc","push","data","id","value","onInvalidate"],"sources":["/Users/docfrawley/Sites/NVoge/srsite/src/composables/getCollection.js"],"sourcesContent":["import { ref, watchEffect } from 'vue'\n\n// firebase imports\nimport { db } from '../firebase/config'\nimport { collection, onSnapshot } from 'firebase/firestore'\n\nconst getCollection = (c) => {\n  const documents = ref(null)\n\n  // collection reference\n  let colRef = collection(db, c)\n\n  const unsub = onSnapshot(colRef, snapshot => {\n    let results = []\n    snapshot.docs.forEach(doc => {\n      results.push({ ...doc.data(), id: doc.id })\n    })\n    \n    // update values\n    documents.value = results\n  })\n\n  watchEffect((onInvalidate) => {\n    onInvalidate(() => unsub());\n  });\n\n  return { documents }\n}\n\nexport default getCollection"],"mappings":"AAAA,SAASA,GAAT,EAAcC,WAAd,QAAiC,KAAjC,C,CAEA;;AACA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,oBAAvC;;AAEA,MAAMC,aAAa,GAAIC,CAAD,IAAO;EAC3B,MAAMC,SAAS,GAAGP,GAAG,CAAC,IAAD,CAArB,CAD2B,CAG3B;;EACA,IAAIQ,MAAM,GAAGL,UAAU,CAACD,EAAD,EAAKI,CAAL,CAAvB;EAEA,MAAMG,KAAK,GAAGL,UAAU,CAACI,MAAD,EAASE,QAAQ,IAAI;IAC3C,IAAIC,OAAO,GAAG,EAAd;IACAD,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAsBC,GAAG,IAAI;MAC3BH,OAAO,CAACI,IAAR,CAAa,EAAE,GAAGD,GAAG,CAACE,IAAJ,EAAL;QAAiBC,EAAE,EAAEH,GAAG,CAACG;MAAzB,CAAb;IACD,CAFD,EAF2C,CAM3C;;IACAV,SAAS,CAACW,KAAV,GAAkBP,OAAlB;EACD,CARuB,CAAxB;EAUAV,WAAW,CAAEkB,YAAD,IAAkB;IAC5BA,YAAY,CAAC,MAAMV,KAAK,EAAZ,CAAZ;EACD,CAFU,CAAX;EAIA,OAAO;IAAEF;EAAF,CAAP;AACD,CArBD;;AAuBA,eAAeF,aAAf"},"metadata":{},"sourceType":"module"}