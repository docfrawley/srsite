{"ast":null,"code":"import { ref } from 'vue';\nimport { projectFirestore } from '../firebase/config';\n\nconst getOrderDocs = (collection, mod, ord) => {\n  const document = ref(null);\n  const error = ref(null);\n  const thevid = ref(); // register the firestore collection reference\n\n  let collectionRef = projectFirestore.collection(collection);\n  const unsub = collectionRef.onSnapshot(snap => {\n    let results = [];\n    snap.docs.forEach(doc => {\n      // must wait for the server to create the timestamp & send it back\n      results.push({ ...doc.data(),\n        id: doc.id\n      });\n    }); // update values\n\n    const theVideo = results.filter(result => {\n      return result.module === mod && result.order === ord;\n    });\n    document.value = theVideo[0];\n    thevid = document.value.iframe;\n    error.value = null;\n  }, err => {\n    console.log(err.message);\n    document.value = null;\n    error.value = 'could not fetch the data';\n  });\n  return thevid;\n};\n\nexport default getOrderDocs;","map":{"version":3,"names":["ref","projectFirestore","getOrderDocs","collection","mod","ord","document","error","thevid","collectionRef","unsub","onSnapshot","snap","results","docs","forEach","doc","push","data","id","theVideo","filter","result","module","order","value","iframe","err","console","log","message"],"sources":["/Users/docfrawley/Sites/NVoge/srsite/src/composables/getLesson.js"],"sourcesContent":["import { ref } from 'vue'\nimport { projectFirestore } from '../firebase/config'\n\nconst getOrderDocs = (collection, mod, ord) => {\n  \n  const document= ref(null)\n  const error = ref(null)\n  const thevid = ref()\n\n  // register the firestore collection reference\n  let collectionRef = projectFirestore.collection(collection)\n\n    \n  const unsub = collectionRef.onSnapshot(snap => {\n    let results = []\n    snap.docs.forEach(doc => {\n      // must wait for the server to create the timestamp & send it back\n      results.push({...doc.data(), id: doc.id})\n    });\n    \n    // update values\n    const theVideo = results.filter((result) => {\n        return result.module===mod && result.order===ord\n    })   \n\n    document.value = theVideo[0]\n    thevid = document.value.iframe\n    \n    error.value = null\n  }, err => {\n    console.log(err.message)\n    document.value = null\n    error.value = 'could not fetch the data'\n  })\n  \n  return thevid\n}\n\nexport default getOrderDocs"],"mappings":"AAAA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;AAEA,MAAMC,YAAY,GAAG,CAACC,UAAD,EAAaC,GAAb,EAAkBC,GAAlB,KAA0B;EAE7C,MAAMC,QAAQ,GAAEN,GAAG,CAAC,IAAD,CAAnB;EACA,MAAMO,KAAK,GAAGP,GAAG,CAAC,IAAD,CAAjB;EACA,MAAMQ,MAAM,GAAGR,GAAG,EAAlB,CAJ6C,CAM7C;;EACA,IAAIS,aAAa,GAAGR,gBAAgB,CAACE,UAAjB,CAA4BA,UAA5B,CAApB;EAGA,MAAMO,KAAK,GAAGD,aAAa,CAACE,UAAd,CAAyBC,IAAI,IAAI;IAC7C,IAAIC,OAAO,GAAG,EAAd;IACAD,IAAI,CAACE,IAAL,CAAUC,OAAV,CAAkBC,GAAG,IAAI;MACvB;MACAH,OAAO,CAACI,IAAR,CAAa,EAAC,GAAGD,GAAG,CAACE,IAAJ,EAAJ;QAAgBC,EAAE,EAAEH,GAAG,CAACG;MAAxB,CAAb;IACD,CAHD,EAF6C,CAO7C;;IACA,MAAMC,QAAQ,GAAGP,OAAO,CAACQ,MAAR,CAAgBC,MAAD,IAAY;MACxC,OAAOA,MAAM,CAACC,MAAP,KAAgBnB,GAAhB,IAAuBkB,MAAM,CAACE,KAAP,KAAenB,GAA7C;IACH,CAFgB,CAAjB;IAIAC,QAAQ,CAACmB,KAAT,GAAiBL,QAAQ,CAAC,CAAD,CAAzB;IACAZ,MAAM,GAAGF,QAAQ,CAACmB,KAAT,CAAeC,MAAxB;IAEAnB,KAAK,CAACkB,KAAN,GAAc,IAAd;EACD,CAhBa,EAgBXE,GAAG,IAAI;IACRC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;IACAxB,QAAQ,CAACmB,KAAT,GAAiB,IAAjB;IACAlB,KAAK,CAACkB,KAAN,GAAc,0BAAd;EACD,CApBa,CAAd;EAsBA,OAAOjB,MAAP;AACD,CAjCD;;AAmCA,eAAeN,YAAf"},"metadata":{},"sourceType":"module"}