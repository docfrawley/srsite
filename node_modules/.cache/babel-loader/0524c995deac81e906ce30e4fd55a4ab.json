{"ast":null,"code":"import _regeneratorRuntime from \"/Users/docfrawley/Sites/srsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/docfrawley/Sites/srsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref } from 'vue'; // firebase imports\n\nimport { db } from '../firebase/config';\nimport { collection, addDoc } from 'firebase/firestore';\n\nvar useCollection = function useCollection(c) {\n  var error = ref(null);\n  var isPending = ref(false);\n  var colRef = collection(db, c); // add a new document\n\n  var addTheDocument = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(doc) {\n      var res;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              error.value = null;\n              isPending.value = true;\n              _context.prev = 2;\n              _context.next = 5;\n              return addDoc(colRef, doc);\n\n            case 5:\n              res = _context.sent;\n              isPending.value = false;\n              return _context.abrupt(\"return\", res);\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0.message);\n              error.value = 'could not send the message';\n              isPending.value = false;\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n\n    return function addTheDocument(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return {\n    error: error,\n    addTheDocument: addTheDocument,\n    isPending: isPending\n  };\n};\n\nexport default useCollection;","map":{"version":3,"names":["ref","db","collection","addDoc","useCollection","c","error","isPending","colRef","addTheDocument","doc","value","res","console","log","message"],"sources":["/Users/docfrawley/Sites/srsite/src/composables/useCollection.js"],"sourcesContent":["import { ref } from 'vue'\n\n// firebase imports\nimport { db } from '../firebase/config'\nimport { collection, addDoc } from 'firebase/firestore'\n\nconst useCollection = (c) => {\n\n  const error = ref(null)\n  const isPending = ref(false)\n  const colRef = collection(db, c)\n\n  // add a new document\n  const addTheDocument = async (doc) => {\n    error.value = null\n    isPending.value = true\n\n    try {\n      const res = await addDoc(colRef, doc)\n      isPending.value = false\n      return res\n    }\n    catch(err) {\n      console.log(err.message)\n      error.value = 'could not send the message'\n      isPending.value = false\n    }\n  }\n\n  return { error, addTheDocument, isPending }\n\n}\n\nexport default useCollection\n"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,KAApB,C,CAEA;;AACA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,UAAT,EAAqBC,MAArB,QAAmC,oBAAnC;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD,EAAO;EAE3B,IAAMC,KAAK,GAAGN,GAAG,CAAC,IAAD,CAAjB;EACA,IAAMO,SAAS,GAAGP,GAAG,CAAC,KAAD,CAArB;EACA,IAAMQ,MAAM,GAAGN,UAAU,CAACD,EAAD,EAAKI,CAAL,CAAzB,CAJ2B,CAM3B;;EACA,IAAMI,cAAc;IAAA,sEAAG,iBAAOC,GAAP;MAAA;MAAA;QAAA;UAAA;YAAA;cACrBJ,KAAK,CAACK,KAAN,GAAc,IAAd;cACAJ,SAAS,CAACI,KAAV,GAAkB,IAAlB;cAFqB;cAAA;cAAA,OAKDR,MAAM,CAACK,MAAD,EAASE,GAAT,CALL;;YAAA;cAKbE,GALa;cAMnBL,SAAS,CAACI,KAAV,GAAkB,KAAlB;cANmB,iCAOZC,GAPY;;YAAA;cAAA;cAAA;cAUnBC,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;cACAT,KAAK,CAACK,KAAN,GAAc,4BAAd;cACAJ,SAAS,CAACI,KAAV,GAAkB,KAAlB;;YAZmB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAdF,cAAc;MAAA;IAAA;EAAA,GAApB;;EAgBA,OAAO;IAAEH,KAAK,EAALA,KAAF;IAASG,cAAc,EAAdA,cAAT;IAAyBF,SAAS,EAATA;EAAzB,CAAP;AAED,CAzBD;;AA2BA,eAAeH,aAAf"},"metadata":{},"sourceType":"module"}