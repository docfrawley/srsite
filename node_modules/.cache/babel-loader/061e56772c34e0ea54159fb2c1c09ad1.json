{"ast":null,"code":"import _objectSpread from \"/Users/docfrawley/Sites/srsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { ref } from 'vue';\nimport { db } from '../firebase/config';\nimport { collection, onSnapshot, query, where } from 'firebase/firestore';\n\nvar getOrderDocs = function getOrderDocs(c, keyField, fieldValue) {\n  var docsLength = ref(null); // register the firestore collection reference\n\n  var colRef = collection(db, c); //   if (keyField==='course'){\n  //      colRef = query(colRef, where(\"course\", \"==\", fieldValue))\n  //   } else {\n  //      colRef = query(colRef, where(\"module\", \"==\", fieldValue))\n  //   }\n\n  var unsub = onSnapshot(colRef, function (snap) {\n    var results = [];\n    snap.docs.forEach(function (doc) {\n      // must wait for the server to create the timestamp & send it back\n      results.push(_objectSpread(_objectSpread({}, doc.data()), {}, {\n        id: doc.id\n      }));\n    }); // update values\n\n    docsLength.value = results.length;\n    console.log('results length: ', docsLength.value);\n  });\n  return docsLength.value;\n};\n\nexport default getOrderDocs;","map":{"version":3,"names":["ref","db","collection","onSnapshot","query","where","getOrderDocs","c","keyField","fieldValue","docsLength","colRef","unsub","snap","results","docs","forEach","doc","push","data","id","value","length","console","log"],"sources":["/Users/docfrawley/Sites/srsite/src/composables/getLength.js"],"sourcesContent":["import { ref } from 'vue'\nimport { db } from '../firebase/config'\nimport { collection, onSnapshot, query, where } from 'firebase/firestore'\n\nconst getOrderDocs = (c, keyField, fieldValue) => {\n\n  const docsLength = ref(null)\n\n  // register the firestore collection reference\n  let colRef = collection(db, c)\n//   if (keyField==='course'){\n//      colRef = query(colRef, where(\"course\", \"==\", fieldValue))\n//   } else {\n//      colRef = query(colRef, where(\"module\", \"==\", fieldValue))\n//   }\n \n    \n  const unsub = onSnapshot(colRef, snap => {\n    let results = []\n    snap.docs.forEach(doc => {\n      // must wait for the server to create the timestamp & send it back\n      results.push({...doc.data(), id: doc.id})\n    });\n\n    // update values\n    docsLength.value = results.length\n    console.log('results length: ', docsLength.value)\n  })\n  return docsLength.value\n}\n\nexport default getOrderDocs"],"mappings":";;;;AAAA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,KAAjC,EAAwCC,KAAxC,QAAqD,oBAArD;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAIC,QAAJ,EAAcC,UAAd,EAA6B;EAEhD,IAAMC,UAAU,GAAGV,GAAG,CAAC,IAAD,CAAtB,CAFgD,CAIhD;;EACA,IAAIW,MAAM,GAAGT,UAAU,CAACD,EAAD,EAAKM,CAAL,CAAvB,CALgD,CAMlD;EACA;EACA;EACA;EACA;;EAGE,IAAMK,KAAK,GAAGT,UAAU,CAACQ,MAAD,EAAS,UAAAE,IAAI,EAAI;IACvC,IAAIC,OAAO,GAAG,EAAd;IACAD,IAAI,CAACE,IAAL,CAAUC,OAAV,CAAkB,UAAAC,GAAG,EAAI;MACvB;MACAH,OAAO,CAACI,IAAR,iCAAiBD,GAAG,CAACE,IAAJ,EAAjB;QAA6BC,EAAE,EAAEH,GAAG,CAACG;MAArC;IACD,CAHD,EAFuC,CAOvC;;IACAV,UAAU,CAACW,KAAX,GAAmBP,OAAO,CAACQ,MAA3B;IACAC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCd,UAAU,CAACW,KAA3C;EACD,CAVuB,CAAxB;EAWA,OAAOX,UAAU,CAACW,KAAlB;AACD,CAzBD;;AA2BA,eAAef,YAAf"},"metadata":{},"sourceType":"module"}