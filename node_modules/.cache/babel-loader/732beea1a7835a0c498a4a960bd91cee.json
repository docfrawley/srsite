{"ast":null,"code":"import _regeneratorRuntime from \"/Users/docfrawley/Sites/srsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/docfrawley/Sites/srsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref } from 'vue';\nimport { db } from '../firebase/config';\nimport { doc, deleteDoc, updateDoc } from 'firebase/firestore';\n\nvar useDocument = function useDocument(c, id) {\n  var error = ref(null);\n  var isPending = ref(false);\n  var docRef = doc(db, c, id);\n\n  var deleteTheDoc = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              isPending.value = true;\n              error.value = null;\n              _context.prev = 2;\n              _context.next = 5;\n              return deleteDoc(docRef);\n\n            case 5:\n              isPending.value = false;\n              _context.next = 13;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0.message);\n              isPending.value = false;\n              error.value = 'could not delete the document';\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 8]]);\n    }));\n\n    return function deleteTheDoc() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var updateTheDoc = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(updates) {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              isPending.value = true;\n              error.value = null;\n              _context2.prev = 2;\n              _context2.next = 5;\n              return updateDoc(docRef, updates);\n\n            case 5:\n              isPending.value = false;\n              _context2.next = 13;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](2);\n              console.log(_context2.t0.message);\n              isPending.value = false;\n              error.value = 'could not update the document';\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 8]]);\n    }));\n\n    return function updateTheDoc(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return {\n    error: error,\n    isPending: isPending,\n    deleteTheDoc: deleteTheDoc,\n    updateTheDoc: updateTheDoc\n  };\n};\n\nexport default useDocument;","map":{"version":3,"names":["ref","db","doc","deleteDoc","updateDoc","useDocument","c","id","error","isPending","docRef","deleteTheDoc","value","console","log","message","updateTheDoc","updates"],"sources":["/Users/docfrawley/Sites/srsite/src/composables/useDocument.js"],"sourcesContent":["import { ref } from 'vue'\nimport { db } from '../firebase/config'\nimport { doc, deleteDoc, updateDoc } from 'firebase/firestore'\n\nconst useDocument = (c, id) => {\n\n  let error = ref(null)\n  let isPending = ref(false)\n  let docRef =doc(db, c, id)\n\n  const deleteTheDoc = async () => {\n    isPending.value = true\n    error.value = null\n\n    try {\n      await deleteDoc(docRef)\n      isPending.value = false\n    }\n    catch(err) {\n      console.log(err.message)\n      isPending.value = false\n      error.value = 'could not delete the document'\n    }\n  } \n\n  const updateTheDoc = async (updates) => {\n    isPending.value = true\n    error.value = null\n\n    try {\n      await updateDoc(docRef, updates)\n      isPending.value = false\n    }\n    catch(err) {\n      console.log(err.message)\n      isPending.value = false\n      error.value = 'could not update the document'\n    }\n  }\n\n  return { error, isPending, deleteTheDoc, updateTheDoc }\n\n}\n\nexport default useDocument"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,GAAT,EAAcC,SAAd,EAAyBC,SAAzB,QAA0C,oBAA1C;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAIC,EAAJ,EAAW;EAE7B,IAAIC,KAAK,GAAGR,GAAG,CAAC,IAAD,CAAf;EACA,IAAIS,SAAS,GAAGT,GAAG,CAAC,KAAD,CAAnB;EACA,IAAIU,MAAM,GAAER,GAAG,CAACD,EAAD,EAAKK,CAAL,EAAQC,EAAR,CAAf;;EAEA,IAAMI,YAAY;IAAA,sEAAG;MAAA;QAAA;UAAA;YAAA;cACnBF,SAAS,CAACG,KAAV,GAAkB,IAAlB;cACAJ,KAAK,CAACI,KAAN,GAAc,IAAd;cAFmB;cAAA;cAAA,OAKXT,SAAS,CAACO,MAAD,CALE;;YAAA;cAMjBD,SAAS,CAACG,KAAV,GAAkB,KAAlB;cANiB;cAAA;;YAAA;cAAA;cAAA;cASjBC,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;cACAN,SAAS,CAACG,KAAV,GAAkB,KAAlB;cACAJ,KAAK,CAACI,KAAN,GAAc,+BAAd;;YAXiB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAZD,YAAY;MAAA;IAAA;EAAA,GAAlB;;EAeA,IAAMK,YAAY;IAAA,uEAAG,kBAAOC,OAAP;MAAA;QAAA;UAAA;YAAA;cACnBR,SAAS,CAACG,KAAV,GAAkB,IAAlB;cACAJ,KAAK,CAACI,KAAN,GAAc,IAAd;cAFmB;cAAA;cAAA,OAKXR,SAAS,CAACM,MAAD,EAASO,OAAT,CALE;;YAAA;cAMjBR,SAAS,CAACG,KAAV,GAAkB,KAAlB;cANiB;cAAA;;YAAA;cAAA;cAAA;cASjBC,OAAO,CAACC,GAAR,CAAY,aAAIC,OAAhB;cACAN,SAAS,CAACG,KAAV,GAAkB,KAAlB;cACAJ,KAAK,CAACI,KAAN,GAAc,+BAAd;;YAXiB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAZI,YAAY;MAAA;IAAA;EAAA,GAAlB;;EAeA,OAAO;IAAER,KAAK,EAALA,KAAF;IAASC,SAAS,EAATA,SAAT;IAAoBE,YAAY,EAAZA,YAApB;IAAkCK,YAAY,EAAZA;EAAlC,CAAP;AAED,CAtCD;;AAwCA,eAAeX,WAAf"},"metadata":{},"sourceType":"module"}