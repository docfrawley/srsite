{"ast":null,"code":"import _objectSpread from \"/Users/docfrawley/Sites/srsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { ref, watchEffect } from 'vue'; // firebase imports\n\nimport { db } from '../firebase/config';\nimport { collection, onSnapshot } from 'firebase/firestore';\n\nvar getCollection = function getCollection(c) {\n  var documents = ref(null); // collection reference\n\n  var colRef = collection(db, c);\n  var unsub = onSnapshot(colRef, function (snapshot) {\n    var results = [];\n    snapshot.docs.forEach(function (doc) {\n      results.push(_objectSpread(_objectSpread({}, doc.data()), {}, {\n        id: doc.id\n      }));\n    }); // update values\n\n    documents.value = results;\n  });\n  watchEffect(function (onInvalidate) {\n    onInvalidate(function () {\n      return unsub();\n    });\n  });\n  return {\n    documents: documents\n  };\n};\n\nexport default getCollection;","map":{"version":3,"names":["ref","watchEffect","db","collection","onSnapshot","getCollection","c","documents","colRef","unsub","snapshot","results","docs","forEach","doc","push","data","id","value","onInvalidate"],"sources":["/Users/docfrawley/Sites/srsite/src/composables/getCollection.js"],"sourcesContent":["import { ref, watchEffect } from 'vue'\n\n// firebase imports\nimport { db } from '../firebase/config'\nimport { collection, onSnapshot } from 'firebase/firestore'\n\nconst getCollection = (c) => {\n  const documents = ref(null)\n\n  // collection reference\n  let colRef = collection(db, c)\n\n  const unsub = onSnapshot(colRef, snapshot => {\n    let results = []\n    snapshot.docs.forEach(doc => {\n      results.push({ ...doc.data(), id: doc.id })\n    })\n    \n    // update values\n    documents.value = results\n  })\n\n  watchEffect((onInvalidate) => {\n    onInvalidate(() => unsub());\n  });\n\n  return { documents }\n}\n\nexport default getCollection"],"mappings":";;;;AAAA,SAASA,GAAT,EAAcC,WAAd,QAAiC,KAAjC,C,CAEA;;AACA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,oBAAvC;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,CAAD,EAAO;EAC3B,IAAMC,SAAS,GAAGP,GAAG,CAAC,IAAD,CAArB,CAD2B,CAG3B;;EACA,IAAIQ,MAAM,GAAGL,UAAU,CAACD,EAAD,EAAKI,CAAL,CAAvB;EAEA,IAAMG,KAAK,GAAGL,UAAU,CAACI,MAAD,EAAS,UAAAE,QAAQ,EAAI;IAC3C,IAAIC,OAAO,GAAG,EAAd;IACAD,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAsB,UAAAC,GAAG,EAAI;MAC3BH,OAAO,CAACI,IAAR,iCAAkBD,GAAG,CAACE,IAAJ,EAAlB;QAA8BC,EAAE,EAAEH,GAAG,CAACG;MAAtC;IACD,CAFD,EAF2C,CAM3C;;IACAV,SAAS,CAACW,KAAV,GAAkBP,OAAlB;EACD,CARuB,CAAxB;EAUAV,WAAW,CAAC,UAACkB,YAAD,EAAkB;IAC5BA,YAAY,CAAC;MAAA,OAAMV,KAAK,EAAX;IAAA,CAAD,CAAZ;EACD,CAFU,CAAX;EAIA,OAAO;IAAEF,SAAS,EAATA;EAAF,CAAP;AACD,CArBD;;AAuBA,eAAeF,aAAf"},"metadata":{},"sourceType":"module"}